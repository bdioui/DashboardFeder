{% extends 'dash/base.html' %}
{% load static %}
{% load dash_filters %}


<script>
{% block jquery %}

$('#parOS').DataTable({
  "iDisplayLength": 50,
    dom: 'Bfrtip',
        buttons: [
            'csv', 'excel', 'pdf', 'print'
        ]

});

$('#parAxe').DataTable({
  "iDisplayLength": 50,
    dom: 'Bfrtip',
        buttons: [
            'csv', 'excel', 'pdf', 'print'
        ]
});

$('#parDI').DataTable({
  "iDisplayLength": 50,
    dom: 'Bfrtip',
        buttons: [
            'csv', 'excel', 'pdf', 'print'
        ]
});




{% endblock %}
</script>


{% block content %}

{% if not enveloppe %}

        <div class="card shadow mb-4 ml-3 mr-3">
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par Axe </h6>
                <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                        aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">Dropdown Header:</div>
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
            </div>

            <div class="card-body">

                <table id= 'parAxe' class="table table-sm table-striped table-bordered table-hover">
                  <thead class='thead-dark'>
                    <tr class='text-center'>
                      <th class="align-middle " scope="col">Axe</th>
                      <th class="align-middle " scope="col">Coût total programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER certifié (€)</th>
                      <th class="align-middle " scope="col">FEDER payé (€)</th>
                      <th class="align-middle " scope="col">Nombre de dossiers</th>
                    </tr>
                  </thead> 
                  <tbody>
                    {% for axe in somme_Axe %}
                    <tr class='text-center' class="align-middle ">
                      <th class='text-left' scope="row">{{axe.axe}}</th>
                      <td>{{axe.Montant_CT|floatformat}} </td>
                      <td>{{axe.Montant_UE|floatformat}} </td>

                      {% if axe.Montant_Certif != None %}
                      <td>{{axe.Montant_Certif|floatformat}} </td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}

                      {% if axe.Montant_Payé != None %}
                      <td>{{axe.Montant_Payé}}</td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}
                      
                      {% if axe.Nombre != None %}
                      <td>{{axe.Nombre}} </td>
                      {% else %}
                      <td> 0 </td>
                      {% endif %}

                      
                    </tr>
                    {% endfor %}
                    
                  </tbody>

                  <tfoot class='text-center table-dark' class="align-middle ">
                    <td class="align-middle ">Total</td>
                    <td class="align-middle ">{{somme_CT.montant_CT__sum|floatformat}} </td>
                    <td class="align-middle ml-2">{{somme_UE.montant_UE__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Certif.DP_certif__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Payé.DP_payé__sum|floatformat}} </td>
                    <td class="align-middle ">{{nombre.numero_op__count}}</td>

                  </tfoot>
                </table>
            </div>
        </div> 

        <div class="card shadow mb-4 ml-3 mr-3">
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par OS </h6>
                <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                        aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">Dropdown Header:</div>
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
            </div>

            <div class="card-body">

                <table id = 'parOS'class="table table-sm mb-0 table-striped table-bordered table-hover">
                  <thead class='thead-dark'>
                    <tr class='text-center'>
                      <th class="align-middle " scope="col">OS</th>
                      <th class="align-middle " scope="col">Coût total programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER certifié (€)</th>
                      <th class="align-middle " scope="col">FEDER payé (€)</th>
                      <th class="align-middle " scope="col">Nombre de dossiers</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for os in somme_OS %}
                    <tr class='text-center' class="align-middle ">
                      <th class='text-left' scope="row">{{os.os}}</th>
                      <td>{{os.Montant_CT|floatformat}} </td>
                      <td>{{os.Montant_UE|floatformat}} </td>

                      {% if os.Montant_Certif != None %}
                      <td>{{os.Montant_Certif|floatformat}} </td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}

                      {% if os.Montant_Payé != None %}
                      <td>{{os.Montant_Payé}}</td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}


                      {% if os.Nombre != None %}
                      <td>{{os.Nombre}} </td>
                      {% else %}
                      <td> 0 </td>
                      {% endif %}



                      
                    </tr>
                    {% endfor %}
                    
                  </tbody>

                  <tfoot class='text-center table-dark' class="align-middle ">
                    <td class="align-middle table-dark">Total</td>
                    <td class="align-middle ">{{somme_CT.montant_CT__sum|floatformat}} </td>
                    <td class="align-middle ml-2">{{somme_UE.montant_UE__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Certif.DP_certif__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Payé.DP_payé__sum|floatformat}} </td>
                    <td class="align-middle ">{{nombre.numero_op__count}}</td>

                  </tfoot>
                </table>


            </div>
        </div>

        <div class="card shadow mb-4 ml-3 mr-3">
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par Domaine d'intervention </h6>
                <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                        aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">Dropdown Header:</div>
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
            </div>

            <div class="card-body">

                <table id='parDI' class="table table-sm table-striped table-bordered table-hover">
                  <thead class='thead-dark'>
                    <tr class='text-center'>
                      <th class="align-middle " scope="col">Domaine d'intervention</th>
                      <th class="align-middle " scope="col">Coût total programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER programmé (€)</th>
                      <th class="align-middle " scope="col">FEDER certifié (€)</th>
                      <th class="align-middle " scope="col">FEDER payé (€)</th>
                      <th class="align-middle " scope="col">Nombre de dossiers</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for di in somme_DI %}
                    <tr class='text-center' class="align-middle ">
                      <th class='text-left' scope="row">{{di.DI}}</th>
                      <td>{{di.Montant_CT|floatformat}} </td>
                      <td>{{di.Montant_UE|floatformat}} </td>

                      {% if di.Montant_Certif != None %}
                      <td>{{di.Montant_Certif|floatformat}} </td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}

                      {% if di.Montant_Payé != None %}
                      <td>{{di.Montant_Payé}}</td>
                      {% else %}
                      <td>0 </td>
                      {% endif %}

                      {% if di.Nombre != None %}
                      <td>{{di.Nombre}} </td>
                      {% else %}
                      <td> 0 </td>
                      {% endif %}

                      
                    </tr>
                    {% endfor %}
                    
                  </tbody>

                  <tfoot class='text-center table-dark' class="align-middle ">
                    <td class="align-middle ">Total</td>
                    <td class="align-middle ">{{somme_CT.montant_CT__sum|floatformat}} </td>
                    <td class="align-middle ml-2">{{somme_UE.montant_UE__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Certif.DP_certif__sum|floatformat}} </td>
                    <td class="align-middle ">{{somme_Payé.DP_payé__sum|floatformat}} </td>
                    <td class="align-middle ">{{nombre.numero_op__count}}</td>

                  </tfoot>
                </table>
            </div>
        </div>


{% else %}

				<div class="mb-4 ml-3 mr-3">

					<div class="row">

                        <!-- Content Column -->
                        <div class="col-lg-6 mb-4">

                            <!-- Project Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary"><i class="fa fa-wh fa-tasks mr-2" aria-hidden="true"></i> Avancement de la programmation </h6>
                                </div>
                                {% for item in enveloppe %}
                                <div class="card-body">
                                    
                                    {% if Axe_1.Montant_UE != None %}
                                    <h4 class="small font-weight-bold"> Axe 1 <span
                                            class="float-right">{{Axe_1.Montant_UE|divide:item.Axe_1}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_1.Montant_UE|divide:item.Axe_1}}%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 1 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_2.Montant_UE != None %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right">{{Axe_2.Montant_UE|divide:item.Axe_2}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_2.Montant_UE|divide:item.Axe_2}}%"
                                            aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 2 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_3.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 3 <span
                                            class="float-right">{{Axe_3.Montant_UE|divide:item.Axe_3}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_3.Montant_UE|divide:item.Axe_3}}%"
                                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 3 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_4.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 4 <span
                                            class="float-right">{{Axe_4.Montant_UE|divide:item.Axe_4}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_4.Montant_UE|divide:item.Axe_4}}%"
                                            aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                     {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 4 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_5.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 5 <span
                                            class="float-right">{{Axe_5.Montant_UE|divide:item.Axe_5}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_5.Montant_UE|divide:item.Axe_5}}%"
                                            aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 5 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                     {% if Axe_6.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 6 <span
                                            class="float-right">{{Axe_6.Montant_UE|divide:item.Axe_6}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_6.Montant_UE|divide:item.Axe_6}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 6 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_12.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 12 <span
                                            class="float-right">{{Axe_12.Montant_UE|divide:item.Axe_12}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_12.Montant_UE|divide:item.Axe_12}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 12 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_13.Montant_UE != None %}
                                    <h4 class="small font-weight-bold">Axe 13 <span
                                            class="float-right">{{Axe_13.Montant_UE|divide:item.Axe_13}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: {{Axe_13.Montant_UE|divide:item.Axe_13}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger"> Axe 13 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    <hr>

                                    {% if somme_UE.montant_UE__sum != None %}
                                    <h4 class="small font-weight-bold">Total <span
                                            class="float-right">{{somme_UE.montant_UE__sum|divide:item.Enveloppe_totale}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated" role="progressbar" style="width: {{somme_UE.montant_UE__sum|divide:item.Enveloppe_totale}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold">Total <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% endfor %}
                                </div>


                            </div>
 
                        </div>

                         <div class="col-lg-6 mb-4">

                            <!-- Project Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-warning"> <i class="fa fa-wh fa-tasks mr-2" aria-hidden="true"></i>Avancement de la certification </h6>
                                </div>
                                {% for item in enveloppe %}
                                <div class="card-body">
                                    {% if Axe_1.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold"> Axe 1 <span
                                            class="float-right">{{Axe_1.Montant_Certif|divide:item.Axe_1}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_1.Montant_Certif|divide:item.Axe_1}}%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 1 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_2.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right">{{Axe_2.Montant_Certif|divide:item.Axe_2}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_2.Montant_Certif|divide:item.Axe_2}}%"
                                            aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_3.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 3 <span
                                            class="float-right">{{Axe_3.Montant_Certif|divide:item.Axe_3}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_3.Montant_Certif|divide:item.Axe_3}}%"
                                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_4.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 4 <span
                                            class="float-right">{{Axe_4.Montant_Certif|divide:item.Axe_4}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_4.Montant_Certif|divide:item.Axe_4}}%"
                                            aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}


                                    {% if Axe_5.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 5 <span
                                            class="float-right">{{Axe_5.Montant_Certif|divide:item.Axe_5}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_5.Montant_Certif|divide:item.Axe_5}}%"
                                            aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_6.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 6 <span
                                            class="float-right">{{Axe_6.Montant_Certif|divide:item.Axe_6}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_6.Montant_Certif|divide:item.Axe_6}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold"> Axe 2 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_12.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 12 <span
                                            class="float-right">{{Axe_12.Montant_Certif|divide:item.Axe_12}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_12.Montant_Certif|divide:item.Axe_12}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>

                                    {% else %}
                                    <h4 class="small font-weight-bold text-danger">Axe 12 <span
                                            class="float-right text-danger">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 0%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}

                                    {% if Axe_13.Montant_Certif != None %}
                                    <h4 class="small font-weight-bold">Axe 13 <span
                                            class="float-right">{{Axe_13.Montant_UE|divide:item.Axe_13}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{Axe_13.Montant_UE|divide:item.Axe_13}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% else %}
                                    <h4 class="small font-weight-bold">Axe 13 <span
                                            class="float-right">0%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 0%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    {% endif %}
                                    <hr>
                                    <h4 class="small font-weight-bold">Total <span
                                            class="float-right">{{somme_Certif.DP_certif__sum|divide:item.Enveloppe_totale}}%</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning progress-bar-striped progress-bar-animated" role="progressbar" style="width: {{somme_Certif.DP_certif__sum|divide:item.Enveloppe_totale}}%"
                                            aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>


                                    {% endfor %}
                                </div>


                            </div>
 
                        </div>
                    </div>
                </div>


	<div class="card shadow mb-4 ml-3 mr-3">
		<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
	        <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par Axe </h6>
	        
	    </div>

	<div class="card-body " style="overflow: scroll; ">

		<table id='parAxe' class="table table-sm table-striped table-hover tab table-bordered" style="overflow: scroll; ">
		  <thead class='thead-dark'>
		    <tr class='text-center'>
		      <th class="align-middle " scope="col">Axe</th>
		      <th class="align-middle " scope="col">Enveloppe totale</th>
		      <th class="align-middle " scope="col">Coût total programmé</th>
		      <th class="align-middle " scope="col">FEDER programmé</th>
		      <th class="align-middle " scope="col">FEDER certifié </th>
		      <th class="align-middle " scope="col">FEDER payé</th>
		      <th class="align-middle " scope="col">Taux de programmation</th>
		      <th class="align-middle " scope="col">Taux de certification</th>
		      <th class="align-middle " scope="col">Taux de mandatement</th>
		      <th class="align-middle " scope="col">FEDER restant à certifier</th>
		      <th class="align-middle " scope="col">Nombre de dossiers</th>
		    </tr>
		  </thead>
		  <tbody>
		  	{% for item in enveloppe %}

		  <!-- 	Axe 1 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">1</th>
		      <td class="align-middle">{{item.Axe_1|floatformat}} </td>
		      <td class="align-middle">{{Axe_1.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_1.Montant_UE|floatformat}} </td>

		      {% if Axe_1.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_1.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_1.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_1.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_1.Montant_UE != None %}
		      <td class="align-middle">{{Axe_1.Montant_UE|divide:item.Axe_1}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_1.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_1.Montant_Certif|divide:item.Axe_1}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_1.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_1.Montant_Payé|divide:item.Axe_1}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_1.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_1|substract:Axe_1.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_1}}</td>
		      {% endif %}

		      {% if Axe_1.Nombre != None %}
		      <td class="align-middle">{{Axe_1.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>


		    <!-- 	Axe 2 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">2</th>
		      <td class="align-middle">{{item.Axe_2|floatformat}} </td>
		      <td class="align-middle">{{Axe_2.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_2.Montant_UE|floatformat}} </td>

		      {% if Axe_2.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_2.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_2.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_2.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_2.Montant_UE != None %}
		      <td class="align-middle">{{Axe_2.Montant_UE|divide:item.Axe_2}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_2.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_2.Montant_Certif|divide:item.Axe_2}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_2.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_2.Montant_Payé|divide:item.Axe_2}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_2.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_2|substract:Axe_2.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_2}}</td>
		      {% endif %}

		      {% if Axe_2.Nombre != None %}
		      <td class="align-middle">{{Axe_2.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		    <!-- 	Axe 3 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">3</th>
		      <td class="align-middle">{{item.Axe_3|floatformat}} </td>
		      <td class="align-middle">{{Axe_3.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_3.Montant_UE|floatformat}} </td>

		      {% if Axe_3.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_3.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_3.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_3.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_3.Montant_UE != None %}
		      <td class="align-middle">{{Axe_3.Montant_UE|divide:item.Axe_3}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_3.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_3.Montant_Certif|divide:item.Axe_3}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_3.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_3.Montant_Payé|divide:item.Axe_3}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_3.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_3|substract:Axe_3.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_3}}</td>
		      {% endif %}

		      {% if Axe_3.Nombre != None %}
		      <td class="align-middle">{{Axe_3.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>



		    <!-- 	Axe 4 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">4</th>
		      <td class="align-middle">{{item.Axe_4|floatformat}} </td>
		      <td class="align-middle">{{Axe_4.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_4.Montant_UE|floatformat}} </td>

		      {% if Axe_4.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_4.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_4.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_4.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_4.Montant_UE != None %}
		      <td class="align-middle">{{Axe_4.Montant_UE|divide:item.Axe_4}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_4.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_4.Montant_Certif|divide:item.Axe_4}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_4.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_4.Montant_Payé|divide:item.Axe_4}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_4.Montant_Certif != None %}
		      <td class="align-middle"> {{item.Axe_4|substract:Axe_4.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_4}}</td>
		      {% endif %}

		      {% if Axe_4.Nombre != None %}
		      <td class="align-middle">{{Axe_4.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		     <!-- 	Axe 4 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">5</th>
		      <td class="align-middle">{{item.Axe_5|floatformat}} </td>
		      <td class="align-middle">{{Axe_5.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_5.Montant_UE|floatformat}} </td>

		      {% if Axe_5.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_5.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_5.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_5.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_5.Montant_UE != None %}
		      <td class="align-middle">{{Axe_5.Montant_UE|divide:item.Axe_5}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_5.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_5.Montant_Certif|divide:item.Axe_5}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_5.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_5.Montant_Payé|divide:item.Axe_5}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_5.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_5|substract:Axe_5.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_5}}</td>
		      {% endif %}

		      {% if Axe_5.Nombre != None %}
		      <td class="align-middle">{{Axe_5.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		    <!-- 	Axe 6 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">6</th>
		      <td class="align-middle">{{item.Axe_6|floatformat}} </td>
		      <td class="align-middle">{{Axe_6.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_6.Montant_UE|floatformat}} </td>

		      {% if Axe_6.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_6.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_6.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_6.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_6.Montant_UE != None %}
		      <td class="align-middle">{{Axe_6.Montant_UE|divide:item.Axe_6}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_6.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_6.Montant_Certif|divide:item.Axe_6}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_6.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_6.Montant_Payé|divide:item.Axe_6}} %</td>
		      {% else %}
		      <td class="align-middle"> class="align-middle"0%</td>
		      {% endif %}

		      {% if Axe_6.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_6|substract:Axe_6.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_6}}</td>
		      {% endif %}

		      {% if Axe_6.Nombre != None %}
		      <td class="align-middle">{{Axe_6.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		    <!-- 	Axe 12 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">12</th>
		      <td class="align-middle">{{item.Axe_12|floatformat}} </td>
		      <td class="align-middle">{{Axe_12.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_12.Montant_UE|floatformat}} </td>

		      {% if Axe_12.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_12.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_12.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_12.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_12.Montant_UE != None %}
		      <td class="align-middle">{{Axe_12.Montant_UE|divide:item.Axe_12}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_12.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_12.Montant_Certif|divide:item.Axe_12}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_12.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_12.Montant_Payé|divide:item.Axe_12}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_12.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_12|substract:Axe_12.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_12}}</td>
		      {% endif %}

		      {% if Axe_12.Nombre != None %}
		      <td class="align-middle">{{Axe_12.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		    <!-- 	Axe 13 -->
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">13</th>
		      <td class="align-middle">{{item.Axe_13|floatformat}} </td>
		      <td class="align-middle">{{Axe_13.Montant_CT|floatformat}} </td>
		      <td class="align-middle">{{Axe_13.Montant_UE|floatformat}} </td>

		      {% if Axe_13.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_13.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_13.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_13.Montant_Payé}}</td>
		      {% else %}
		      <td class="align-middle">0 </td>
		      {% endif %}

		      {% if Axe_13.Montant_UE != None %}
		      <td class="align-middle">{{Axe_13.Montant_UE|divide:item.Axe_13}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}
		      

		      {% if Axe_13.Montant_Certif != None %}
		      <td class="align-middle">{{Axe_13.Montant_Certif|divide:item.Axe_13}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_13.Montant_Payé != None %}
		      <td class="align-middle">{{Axe_13.Montant_Payé|divide:item.Axe_13}} %</td>
		      {% else %}
		      <td class="align-middle">0%</td>
		      {% endif %}

		      {% if Axe_13.Montant_Certif != None %}
		      <td class="align-middle">{{item.Axe_13|substract:Axe_13.Montant_UE}} </td>
		      {% else %}
		      <td class="align-middle"> {{item.Axe_13}}</td>
		      {% endif %}

		      {% if Axe_13.Nombre != None %}
		      <td class="align-middle">{{Axe_13.Nombre}} </td>
		      {% else %}
		      <td class="align-middle"> 0 </td>
		      {% endif %}
		    </tr>

		   
		    
		    
		  </tbody>

		  <tfoot class='text-center table-dark' class="align-middle ">
		  	<td class="align-middle ">Total</td>
		  	<td class="align-middle ">{{item.Enveloppe_totale|floatformat}} </td>
		  	<td class="align-middle ">{{somme_CT.montant_CT__sum|floatformat}} </td>
		  	<td class="align-middle ml-2">{{somme_UE.montant_UE__sum|floatformat}} </td>
		  	<td class="align-middle ">{{somme_Certif.DP_certif__sum|floatformat}} </td>
		  	<td class="align-middle ">{{somme_Payé.DP_payé__sum|floatformat}} </td>
		  	<td class="align-middle ">{{somme_UE.montant_UE__sum|divide:item.Enveloppe_totale}} %</td>
		  	<td class="align-middle ">{{somme_Certif.DP_certif__sum|divide:item.Enveloppe_totale}} %</td>
		  	<td class="align-middle ">{{somme_Payé.DP_payé__sum|divide:item.Enveloppe_totale}} %</td>
		  	<td class="align-middle ">{{item.Enveloppe_totale|substract:somme_UE.montant_UE__sum}} </td>
		  	<td class="align-middle ">{{nombre.numero_op__count}}</td>

  		  </tfoot>
		</table>
		 {% endfor %}
	</div>
</div> 

               <div class="card shadow mb-4 ml-3 mr-3">
                                <!-- Card Header - Dropdown -->
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                  <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par OS </h6>
                                  
                              </div>
                                <!-- Card Body -->
                                <div class="card-body " style="overflow: scroll; ">
                                        <table id='parOS' class="table table-sm table-striped table-hover tab table-bordered" style="overflow: scroll;">
                                          <thead class='align-middle text-center thead-dark'>
                                            <tr class='align-middle'>
                                              <th class='align-middle' scope="col">OS</th>
                                              <th class='align-middle' scope="col">Enveloppe</th>
                                              <th class='align-middle' scope="col">Montant programmé</th>
                                              <th class='align-middle' scope="col">Feder certifié</th>
                                              <th class='align-middle' scope="col">Restant à programmer</th>
                                              <th class='align-middle' scope="col">Restant à certifier</th>
                                            </tr>
                                          </thead>
                                          <tbody class='align-middle text-center'>
                                            
                                             {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">1.1</th>
                                              <td>{{item.OS_1_1}}</td>
                                              <td>{{OS_1_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_1_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_1_1.Montant_Certif|floatformat:2}}
                                                  </td>
                                                  {% endif %}

                                              <td>{{item.OS_1_1|substract:OS_1_1.Montant_UE}}</td>
                                                  {% if OS_1_1.Montant_Certif == None %}
                                                  <td>{{item.OS_1_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_1_1|substract:OS_1_1.Montant_Certif}}</td> 
                                                  {% endif %} 

                                              
                                            </tr>
                                            {% endfor %}

                                           {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">1.2</th>
                                              <td>{{item.OS_1_2}}</td>
                                              <td>{{OS_1_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_1_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_1_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_1_2|substract:OS_1_2.Montant_UE}}</td>
                                                  {% if OS_1_2.Montant_Certif == None %}
                                                  <td>{{item.OS_1_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_1_2|substract:OS_1_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">1.3</th>
                                              <td>{{item.OS_1_3}}</td>
                                              <td>{{OS_1_3.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_1_3.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_1_3.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_1_3|substract:OS_1_3.Montant_UE}}</td>
                                                  {% if OS_1_3.Montant_Certif == None %}
                                                  <td>{{item.OS_1_3}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_1_3|substract:OS_1_3.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">1.4</th>
                                              <td>{{item.OS_1_4}}</td>
                                              <td>{{OS_1_4.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_1_4.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_1_4.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_1_4|substract:OS_1_4.Montant_UE}}</td>
                                                  {% if OS_1_4.Montant_Certif == None %}
                                                  <td>{{item.OS_1_4}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_1_4|substract:OS_1_4.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">2.1</th>
                                              <td>{{item.OS_2_1}}</td>
                                              <td>{{OS_2_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_2_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_2_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_2_1|substract:OS_2_1.Montant_UE}}</td>
                                                  {% if OS_2_1.Montant_Certif == None %}
                                                  <td>{{item.OS_2_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_2_1|substract:OS_2_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                           {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">2.2</th>
                                              <td>{{item.OS_2_2}}</td>
                                              <td>{{OS_2_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_2_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_2_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_2_2|substract:OS_2_2.Montant_UE}}</td>
                                                  {% if OS_2_2.Montant_Certif == None %}
                                                  <td>{{item.OS_2_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_2_2|substract:OS_2_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">2.3</th>
                                              <td>{{item.OS_2_3}}</td>
                                              <td>{{OS_2_3.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_2_3.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_2_3.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_2_3|substract:OS_2_3.Montant_UE}}</td>
                                                  {% if OS_2_3.Montant_Certif == None %}
                                                  <td>{{item.OS_2_3}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_2_3|substract:OS_2_3.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">3.1</th>
                                              <td>{{item.OS_3_1}}</td>
                                              <td>{{OS_3_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_3_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_3_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_3_1|substract:OS_3_1.Montant_UE}}</td>
                                                  {% if OS_3_1.Montant_Certif == None %}
                                                  <td>{{item.OS_3_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_3_1|substract:OS_3_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">3.2</th>
                                              <td>{{item.OS_3_2}}</td>
                                              <td>{{OS_3_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_3_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_3_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_3_2|substract:OS_3_2.Montant_UE}}</td>
                                                  {% if OS_3_2.Montant_Certif == None %}
                                                  <td>{{item.OS_3_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_3_2|substract:OS_3_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}


                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">3.3</th>
                                              <td>{{item.OS_3_3}}</td>
                                              <td>{{OS_3_3.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_3_3.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_3_3.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_3_3|substract:OS_3_3.Montant_UE}}</td>
                                                  {% if OS_3_3.Montant_Certif == None %}
                                                  <td>{{item.OS_3_3}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_3_3|substract:OS_3_3.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">4.1</th>
                                              <td>{{item.OS_4_1}}</td>
                                              <td>{{OS_4_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_4_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_4_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_4_1|substract:OS_4_1.Montant_UE}}</td>
                                                  {% if OS_4_1.Montant_Certif == None %}
                                                  <td>{{item.OS_4_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_4_1|substract:OS_4_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">4.2</th>
                                              <td>{{item.OS_4_2}}</td>
                                              <td>{{OS_4_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_4_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_4_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_4_2|substract:OS_4_2.Montant_UE}}</td>
                                                  {% if OS_4_2.Montant_Certif == None %}
                                                  <td>{{item.OS_4_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_4_2|substract:OS_4_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">4.3</th>
                                              <td>{{item.OS_4_3}}</td>
                                              <td>{{OS_4_3.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_4_3.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_4_3.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_4_3|substract:OS_4_3.Montant_UE}}</td>
                                                  {% if OS_4_3.Montant_Certif == None %}
                                                  <td>{{item.OS_4_3}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_4_3|substract:OS_4_3.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                            {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">4.4</th>
                                              <td>{{item.OS_4_4}}</td>
                                              <td>{{OS_4_4.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_4_4.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_4_4.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_4_4|substract:OS_4_4.Montant_UE}}</td>
                                                  {% if OS_4_4.Montant_Certif == None %}
                                                  <td>{{item.OS_4_4}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_4_4|substract:OS_4_4.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                             {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">5.1</th>
                                              <td>{{item.OS_5_1}}</td>
                                              <td>{{OS_5_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_5_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_5_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_5_1|substract:OS_5_1.Montant_UE}}</td>
                                                  {% if OS_5_1.Montant_Certif == None %}
                                                  <td>{{item.OS_5_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_5_1|substract:OS_5_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                              {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">5.2</th>
                                              <td>{{item.OS_5_2}}</td>
                                              <td>{{OS_5_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_5_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_5_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_5_2|substract:OS_5_2.Montant_UE}}</td>
                                                  {% if OS_5_2.Montant_Certif == None %}
                                                  <td>{{item.OS_5_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_5_2|substract:OS_5_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                             {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">6.1</th>
                                              <td>{{item.OS_6_1}}</td>
                                              <td>{{OS_6_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_6_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_6_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_6_1|substract:OS_6_1.Montant_UE}}</td>
                                                  {% if OS_6_1.Montant_Certif == None %}
                                                  <td>{{item.OS_6_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_6_1|substract:OS_6_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}


                                             {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">6.2</th>
                                              <td>{{item.OS_6_2}}</td>
                                              <td>{{OS_6_2.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_6_2.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_6_2.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_6_2|substract:OS_6_2.Montant_UE}}</td>
                                                  {% if OS_6_2.Montant_Certif == None %}
                                                  <td>{{item.OS_6_2}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_6_2|substract:OS_6_2.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                              {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">12</th>
                                              <td>{{item.OS_12_1}}</td>
                                              <td>{{OS_12_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_12_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_12_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_12_1|substract:OS_12_1.Montant_UE}}</td>
                                                  {% if OS_12_1.Montant_Certif == None %}
                                                  <td>{{item.OS_12_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_12_1|substract:OS_12_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}

                                             {% for item in enveloppe %}
                                            <tr>
                                              <th scope="row">13</th>
                                              <td>{{item.OS_13_1}}</td>
                                              <td>{{OS_13_1.Montant_UE|floatformat:2}}</td>
                                                  {% if OS_13_1.Montant_Certif == None %}
                                                  <td> 0 </td>
                                                  {% else %}
                                                  <td>{{OS_13_1.Montant_Certif|floatformat:2}}</td>
                                                  {% endif %}

                                              <td>{{item.OS_13_1|substract:OS_13_1.Montant_UE}}</td>
                                                  {% if OS_13_1.Montant_Certif == None %}
                                                  <td>{{item.OS_13_1}}</td>
                                                  {% else %}
                                                  <td>{{item.OS_13_1|substract:OS_13_1.Montant_Certif}}</td> 
                                                  {% endif %} 
                                            </tr>
                                            {% endfor %}


                                          </tbody>

                                         <tfoot class= 'table-dark'>
                                            {% for item in enveloppe %}
                                              <td class='align-middle text-center'>Total</td>
                                              <td class='align-middle text-center'>{{item.Enveloppe_totale}}</td>
                                              
                                                {% if somme_UE.montant_UE__sum != 0 %}
                                                <td class='align-middle text-center'>{{somme_UE.montant_UE__sum|floatformat:2}}</td>
                                                {% else %}
                                                <td class='align-middle text-center'>0</td>
                                                {% endif %}
                                                  
                                                {% if somme_Certif.DP_certif__sum != 0 %}
                                                <td class='align-middle text-center'>{{somme_Certif.DP_certif__sum|floatformat:2}}</td>
                                                {% else %}
                                                <td class='align-middle text-center'>0 </td>    
                                                {% endif %}

                                                {% if somme_UE.montant_UE__sum != 0 %}
                                                <td class='align-middle text-center'>{{item.Enveloppe_totale|substract:somme_UE.montant_UE__sum}}</td>
                                                {% else %}
                                                <td class='align-middle text-center'>0</td>
                                                {%endif%}

                                                {% if somme_Certif.DP_certif__sum != 0 %}
                                                <td class='align-middle text-center'>{{item.Enveloppe_totale|substract:somme_Certif.DP_certif__sum}}</td>
                                                {% else %}
                                                <td class='align-middle text-center'>0</td>
                                                {%endif%}   
                                            
                                            {% endfor %}

                                          </tfoot> 
                                        </table>
                                    </div>
                                </div>

                                
<div class="card shadow mb-4 ml-3 mr-3">
	<div
        class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary "><i class="fa fa-wh fa-table mr-2" aria-hidden="true"></i> Rapport par Domaine d'intervention </h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                aria-labelledby="dropdownMenuLink">
                <div class="dropdown-header">Dropdown Header:</div>
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
            </div>
        </div>
    </div>

	<div class="card-body" style="overflow: scroll; ">

		<table id='parDI' class="table table-sm table-striped table-bordered">
		  <thead class='thead-dark'>
		    <tr class='text-center'>
		      <th class="align-middle " scope="col">Domaine d'intervention</th>
		      <th class="align-middle " scope="col">Coût total programmé (€)</th>
		      <th class="align-middle " scope="col">FEDER programmé (€)</th>
		      <th class="align-middle " scope="col">FEDER certifié (€)</th>
		      <th class="align-middle " scope="col">FEDER payé (€)</th>
		      <th class="align-middle " scope="col">Nombre de dossiers</th>
		    </tr>
		  </thead>
		  <tbody>
		  	{% for di in somme_DI %}
		    <tr class='text-center' class="align-middle ">
		      <th class='align-middle' scope="row">{{di.DI}}</th>
		      <td>{{di.Montant_CT|floatformat}} </td>
		      <td>{{di.Montant_UE|floatformat}} </td>

		      {% if di.Montant_Certif != None %}
		      <td>{{di.Montant_Certif|floatformat}} </td>
		      {% else %}
		      <td>0 </td>
		      {% endif %}

		      {% if di.Montant_Payé != None %}
		      <td>{{di.Montant_Payé}}</td>
		      {% else %}
		      <td>0 </td>
		      {% endif %}
		      

		      {% if di.Nombre != None %}
		      <td>{{di.Nombre}} </td>
		      {% else %}
		      <td> 0 </td>
		      {% endif %}

		      
		    </tr>
		    {% endfor %}
		    
		  </tbody>

		  <tfoot class='text-center table-dark' class="align-middle ">
		  	<td class="align-middle ">Total</td>
		  	<td class="align-middle ">{{somme_CT.montant_CT__sum|floatformat}} </td>
		  	<td class="align-middle ml-2">{{somme_UE.montant_UE__sum|floatformat}} </td>
		  	<td class="align-middle ">{{somme_Certif.DP_certif__sum|floatformat}} </td>
		  	<td class="align-middle ">{{somme_Payé.DP_payé__sum|floatformat}} </td>
		  	<td class="align-middle ">{{nombre.numero_op__count}}</td>

  		  </tfoot>
		</table>
	</div>
</div>

{% endif %}


{% endblock %}